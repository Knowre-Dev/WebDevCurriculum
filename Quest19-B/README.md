# Quest 19-B. 서버 아키텍쳐 패턴

## Introduction
* 이번 퀘스트에서는 현대적인 서버 아키텍쳐 패턴에 대해 익혀 보도록 하겠습니다.

## Topics
* Microservice Architecture
* Serverless Architecture
* AWS Lambda
* Service Mesh

## Resources
* [Jeff Bezos의 이메일](https://news.hada.io/topic?id=638)
* [마이크로서비스란?](https://www.redhat.com/ko/topics/microservices/what-are-microservices)
* [AWS Lambda](https://docs.aws.amazon.com/ko_kr/lambda/latest/dg/welcome.html)
* [AWS API Gateway](https://docs.aws.amazon.com/ko_kr/apigateway/latest/developerguide/welcome.html)

## Checklist
* 마이크로서비스 아키텍쳐란 무엇일까요? 어떤 식으로 서비스를 구성할 수 있을까요? 어떤 장점을 가지고 있을까요?
```
마이크로서비스 아키텍처는 애플리케이션이 느슨하게 결합되고 독립적으로 배포 가능한 소규모 서비스 모음으로 분할되는 소프트웨어 개발 접근 방식입니다. 각 서비스는 특정 기능을 담당하며 일반적으로 API(응용 프로그래밍 인터페이스)를 통해 네트워크를 통해 다른 서비스와 통신합니다. 마이크로서비스는 자체 프로세스에서 실행되고 자체 데이터 저장소가 있는 각 서비스와 함께 모듈식 및 자율적으로 설계되었습니다.

마이크로 서비스를 구성하려면 일반적으로 데이터베이스 연결 설정, API 끝점, 로깅 수준, 인증 설정 등과 같은 서비스에 대한 구성 매개 변수 또는 설정을 정의합니다. 이러한 구성 설정은 구성 파일, 환경 변수 또는 중앙 집중식 마이크로 서비스에 사용되는 기술 스택 및 인프라에 따라 구성 관리 시스템.

마이크로서비스 아키텍처의 장점은 다음과 같습니다.

1. 확장성: 마이크로서비스는 특정 요구 사항에 따라 개별 서비스를 독립적으로 확장할 수 있으므로 효율적인 리소스 활용과 수평적 확장이 가능합니다.
2. 유연성: 마이크로서비스는 모놀리식 아키텍처에 얽매이지 않고 특정 요구 사항에 따라 각 서비스에 대해 서로 다른 기술, 프로그래밍 언어 및 프레임워크를 선택할 수 있는 유연성을 제공합니다.
3. 모듈성: 마이크로서비스는 느슨하게 결합되도록 설계되어 다른 서비스에 영향을 주지 않고 각 서비스를 독립적으로 개발, 테스트, 배포 및 유지 관리하기가 더 쉽습니다.
4. 복원력: 마이크로서비스는 서로 격리되어 있으므로 하나의 서비스에 오류가 발생하거나 문제가 발생하더라도 다른 서비스에 반드시 영향을 미치지 않으므로 단일 지점 오류의 위험이 줄어듭니다.
5. 지속적인 전달: 마이크로서비스는 각 서비스를 독립적으로 테스트, 구축 및 배포할 수 있으므로 반복 및 릴리스 주기를 더 빠르게 할 수 있으므로 지속적인 전달 및 배포 관행을 촉진합니다.
6. 팀 자율성: 마이크로서비스는 서로 다른 팀이 자체 개발, 테스트 및 배포 프로세스를 통해 서로 다른 서비스에 대해 독립적으로 작업할 수 있도록 하여 개발 프로세스에서 더 큰 자율성과 민첩성을 제공합니다.

그러나 마이크로서비스 아키텍처에는 분산 시스템 관리의 복잡성 증가, 서비스 간 통신의 추가 오버헤드, 효과적인 모니터링, 로깅 및 디버깅 관행의 필요성과 같은 몇 가지 문제도 있습니다. 소프트웨어 개발 프로젝트에서 마이크로서비스 아키텍처를 성공적으로 채택하려면 적절한 설계, 구현 및 관리가 중요합니다.
```
* 서버리스 아키텍쳐란 무엇일까요? 어떤 식으로 서비스를 구성할 수 있을까요? 어떤 장점을 가지고 있을까요?
```
FaaS(Function-as-a-Service)라고도 하는 서버리스 아키텍처는 서버 관리 책임을 개발자로부터 추상화하고 이벤트에 의해 트리거되는 서버리스 기능을 구성하여 애플리케이션을 구축하는 클라우드 컴퓨팅 패러다임입니다. 서버리스 아키텍처에서 개발자는 HTTP 요청, 데이터베이스 변경 또는 예약된 이벤트와 같은 특정 이벤트 또는 트리거에 대한 응답으로 실행되는 작은 상태 비저장 기능을 작성하는 데 중점을 둡니다.

서버리스 아키텍처에서 서비스를 구성하려면 일반적으로 함수의 이벤트 소스 정의, 필요한 리소스 지정, 적절한 트리거 설정, 서버리스 컴퓨팅에 사용되는 함수 또는 플랫폼에 특정한 기타 매개변수 구성이 포함됩니다. 이는 사용 중인 플랫폼 및 서비스에 따라 클라우드 공급자의 관리 콘솔, 명령줄 인터페이스(CLI) 또는 코드형 인프라(IaC) 도구를 통해 수행할 수 있습니다.

서버리스 아키텍처의 장점은 다음과 같습니다.

1. 비용 효율성: 서버리스 컴퓨팅은 기존의 서버 기반 아키텍처에서 미리 할당된 리소스에 대한 비용을 지불하는 것과는 반대로 기능의 실제 사용량을 기반으로 세분화된 청구를 허용합니다. 이로 인해 특히 간헐적으로 사용되거나 가변적인 워크로드 애플리케이션의 경우 비용을 절감할 수 있습니다.
2. 확장성: 서버리스 기능은 들어오는 이벤트 또는 트리거 수에 따라 자동으로 확장되어 애플리케이션이 수동 개입 없이 다양한 워크로드를 처리할 수 있도록 합니다.
3. 단순화된 운영: 서버리스 아키텍처를 사용하면 개발자는 서버, 네트워킹 또는 기타 인프라 구성 요소를 관리할 필요가 없습니다. 이러한 책임은 클라우드 공급자에 의해 추상화되기 때문입니다. 이를 통해 개발자는 인프라 관리가 아닌 코드 작성에 집중할 수 있습니다.
4. 신속한 개발: 서버리스 아키텍처는 개발에 대한 모듈식 및 이벤트 중심 접근 방식을 촉진하여 개발자가 쉽게 테스트하고 반복할 수 있는 작고 집중적인 기능을 신속하게 구축하고 배포하여 개발 주기를 단축할 수 있도록 합니다.
5. 유연성: 서버리스 아키텍처는 기능이 기본 인프라에서 분리되어 기술 선택의 유연성을 제공하므로 다양한 언어, 프레임워크 및 서비스의 혼합을 사용하여 애플리케이션을 구축할 수 있습니다.
6. 자동 크기 조정: 서버리스 기능은 들어오는 이벤트 또는 트리거 수에 따라 자동으로 확장 또는 축소할 수 있으므로 애플리케이션이 수동 개입 없이 다양한 워크로드를 처리할 수 있습니다.

그러나 서버리스 아키텍처에는 자주 사용하지 않는 기능에 대한 잠재적인 콜드 스타트 ​​대기 시간, 개별 기능에 대한 제한된 실행 시간, 분산 상태 또는 복잡한 워크플로 관리 문제와 같은 몇 가지 제한 사항도 있습니다. 소프트웨어 개발 프로젝트에서 서버리스 아키텍처를 성공적으로 채택하려면 적절한 설계, 테스트 및 모니터링 방식이 중요합니다.
```
* AWS Lambda는 어떤 서비스일까요? 이러한 서비스는 어떤 특징을 가지고, 어디에 쓰일 수 있을까요?
```
AWS Lambda는 서버를 프로비저닝하거나 관리할 필요 없이 클라우드에서 코드를 실행할 수 있도록 하는 Amazon Web Services(AWS)에서 제공하는 서버리스 컴퓨팅 서비스입니다. AWS Lambda를 사용하면 이벤트에 의해 트리거되는 작은 상태 비저장 함수를 작성하고 수신 이벤트 수에 따라 자동으로 확장할 수 있습니다.

AWS Lambda의 특징은 다음과 같습니다.

1. 이벤트 기반 컴퓨팅: AWS Lambda 함수는 HTTP 요청, S3 버킷의 변경 또는 CloudWatch 이벤트와 같은 이벤트에 의해 트리거되므로 특정 이벤트에 실시간으로 응답하는 서버리스 애플리케이션을 구축할 수 있습니다.
2. 자동 조정: AWS Lambda는 들어오는 이벤트 수에 따라 함수 인스턴스 수를 자동으로 조정하므로 애플리케이션이 수동 개입 없이 다양한 워크로드를 처리할 수 있습니다.
3. 사용한 만큼만 지불: AWS Lambda는 선결제 비용이나 장기 약정 없이 함수의 실제 사용량에 대해서만 비용을 지불하는 종량제 가격 모델을 제공합니다. 이를 통해 실제 워크로드를 기반으로 비용 효율적인 확장이 가능합니다.
4. 상태 비저장 실행: AWS Lambda 함수는 상태 비저장이므로 호출 간에 데이터나 컨텍스트를 유지하지 않습니다. 이것은 서로 독립적이고 공유 상태에 의존하지 않는 작고 집중적인 기능을 작성하는 "서버리스" 사고 방식을 촉진합니다.
5. 다른 AWS 서비스와의 손쉬운 통합: AWS Lambda는 Amazon S3, Amazon DynamoDB, Amazon SNS 및 Amazon SQS와 같은 다른 AWS 서비스와 쉽게 통합할 수 있으므로 서버리스 기능 및 기타 관리 서비스의 조합을 사용하여 복잡한 애플리케이션을 구축할 수 있습니다. .

AWS Lambda는 다음을 비롯한 다양한 사용 사례에서 사용할 수 있습니다.

1. 실시간 데이터 처리: AWS Lambda를 사용하여 IoT 장치에서 데이터 스트림 처리, 로그 분석 또는 다운스트림 처리를 위한 데이터 변환과 같이 들어오는 데이터를 실시간으로 처리할 수 있습니다.
2. 서버리스 API: AWS Lambda를 사용하여 서버리스 API를 구축할 수 있습니다. 여기서 Lambda 함수는 들어오는 API 요청 처리를 처리하여 비용 효율적이고 확장 가능한 API 아키텍처를 허용합니다.
3. 데이터 변환 및 보강: AWS Lambda는 데이터 처리 파이프라인의 일부로 데이터 검증, 필터링 또는 보강과 같은 전송 중인 데이터를 변환하고 보강하는 데 사용할 수 있습니다.
4. 자동화 및 DevOps 작업: AWS Lambda를 사용하여 DevOps 워크플로의 일부로 백업, 데이터 동기화 및 배포 작업과 같은 작업을 자동화할 수 있습니다.
5. 챗봇 및 메시징 애플리케이션: AWS Lambda를 사용하여 메시징 및 챗봇 상호 작용을 처리하고 수신 메시지를 처리하고 적절한 응답 또는 작업을 트리거할 수 있습니다.
6. 이미지 및 비디오 처리: AWS Lambda는 미디어 처리 워크플로의 일부로 크기 조정, 자르기 또는 트랜스코딩과 같은 이미지 또는 비디오를 처리하는 데 사용할 수 있습니다.
7. 기계 학습 추론: AWS Lambda는 추론을 위한 기계 학습 모델을 호출하는 데 사용할 수 있으므로 서버리스 애플리케이션에서 실시간 예측이 가능합니다.

이는 AWS Lambda를 활용하여 서버리스 애플리케이션을 구축하고 클라우드에서 이벤트 중심의 확장 가능하며 비용 효율적인 컴퓨팅을 가능하게 하는 많은 사용 사례 중 일부에 불과합니다.
```
* API Gateway는 어떤 서비스인가요? 어떤 설정을 할 수 있을까요?
```
API Gateway는 애플리케이션용 API(애플리케이션 프로그래밍 인터페이스)를 생성, 배포 및 관리할 수 있도록 Amazon Web Services(AWS)에서 제공하는 완전 관리형 서비스입니다. 웹 또는 모바일 애플리케이션과 같은 클라이언트와 AWS Lambda, Amazon EC2 인스턴스 또는 기타 HTTP 엔드포인트와 같은 백엔드 서비스 간의 통신을 가능하게 하는 "게이트웨이" 역할을 합니다.

API Gateway는 다음을 포함하여 애플리케이션의 요구 사항에 맞게 사용자 지정할 수 있는 광범위한 설정 및 구성을 제공합니다.

API 생성 및 관리: API Gateway 콘솔, AWS CLI(Command Line Interface) 또는 AWS SDK(Software Development Kits)를 사용하여 API를 생성하고 관리할 수 있습니다. 인증 및 권한 부여, 캐싱, 제한 및 로깅과 같은 API 설정을 구성할 수 있습니다.
API 배포: API Gateway를 사용하면 프로덕션, 스테이징 또는 개발과 같은 다양한 환경에 API를 배포하고 여러 API 버전을 관리할 수 있습니다. 사용자 지정 배포 단계를 생성하고, API 수명 주기를 관리하고, API 버전 관리를 처리할 수도 있습니다.
인증 및 권한 부여: API Gateway는 AWS Identity and Access Management(IAM), Amazon Cognito 또는 Lambda 함수를 사용한 사용자 지정 권한 부여와 같은 다양한 메커니즘을 사용하여 인증 및 권한 부여에 대한 기본 제공 지원을 제공합니다. 인증 및 승인 설정을 구성하여 API에 대한 액세스를 제어할 수 있습니다.
요청 및 응답 변환: API Gateway를 사용하면 매핑 템플릿을 사용하여 요청 및 응답을 변환할 수 있으므로 요청 및 응답 페이로드, 헤더 및 쿼리 매개 변수를 수정할 수 있습니다. 이는 데이터 유효성 검사, 데이터 보강 또는 페이로드 수정에 유용할 수 있습니다.
캐싱 및 조절: API Gateway는 API의 성능과 확장성을 제어하기 위한 캐싱 및 조절 설정을 제공합니다. 백엔드 서비스의 응답을 캐시하도록 캐싱 설정을 구성하여 백엔드 리소스에 대한 로드를 줄일 수 있습니다. 또한 제한 설정을 구성하여 API에 대한 요청 속도를 제한하여 서비스 남용 또는 과부하를 방지할 수 있습니다.
모니터링 및 로깅: API Gateway는 모니터링 및 로깅 기능을 제공하므로 API의 성능 및 사용을 모니터링할 수 있습니다. 분석 및 문제 해결을 위해 API Gateway 로그를 Amazon CloudWatch Logs로 캡처하도록 로깅 설정을 구성할 수 있습니다. CloudWatch 지표를 활성화하여 API Gateway 사용량, 오류 및 지연 시간을 모니터링할 수도 있습니다.
사용자 지정 도메인 이름 및 SSL 인증서: API Gateway를 사용하면 API에 대한 사용자 지정 도메인 이름을 구성하여 사용자 지정 URL을 통해 API를 노출할 수 있습니다. 클라이언트와 API 간의 통신을 보호하기 위해 SSL(Secure Sockets Layer) 인증서를 구성할 수도 있습니다.
API 설명서 및 테스트: API Gateway는 API 설명서를 생성하는 기능을 제공하므로 OpenAPI(이전의 Swagger) 형식으로 API 설명서를 생성할 수 있습니다. 내장된 API Gateway 테스트 콘솔을 사용하여 API를 테스트하고 API 요청 및 응답을 시뮬레이션할 수도 있습니다.

이는 AWS API Gateway로 수행할 수 있는 설정 및 구성 중 일부에 불과합니다. API Gateway는 특정 요구 사항에 맞게 사용자 지정할 수 있는 다양한 기능과 설정을 통해 애플리케이션용 API를 생성, 배포 및 관리하기 위한 유연하고 확장 가능한 솔루션을 제공합니다.
```
* 많은 마이크로서비스들을 복잡하게 연결할 경우 관리상에 어떤 난점이 생길 수 있을까요? 서비스 메쉬는 무엇이고 이러한 난점을 어떻게 해결하려는 시도일까요?
```
많은 마이크로서비스가 복잡한 방식으로 연결되면 다음과 같은 몇 가지 관리 문제가 발생할 수 있습니다.

1. 서비스 검색 및 라우팅: 마이크로서비스의 수가 증가함에 따라 특히 서비스가 자주 오고 갈 수 있는 동적 환경에서 서비스 간 요청을 검색하고 라우팅하는 것이 어려워집니다. 서비스 검색 및 라우팅을 수동으로 관리하는 것은 번거롭고 오류가 발생하기 쉽습니다.
2. 로드 밸런싱: 최적의 리소스 활용을 보장하고 개별 인스턴스의 과부하를 방지하기 위해 수신 요청을 여러 마이크로서비스 인스턴스에 고르게 분배하는 것은 특히 마이크로서비스 및 해당 인스턴스의 수가 증가함에 따라 어려울 수 있습니다.
3. 복원력 및 내결함성: 복잡한 마이크로서비스 아키텍처에서 복원력과 내결함성을 관리하는 것은 어려울 수 있습니다. 서비스가 실패하거나 네트워크 문제가 발생하거나 예기치 않은 오류가 발생할 수 있습니다. 이러한 오류를 적절하게 처리하고 재시도, 회로 차단기 및 기타 내결함성 패턴을 적용하는 것은 마이크로 서비스 수가 증가함에 따라 복잡해질 수 있습니다.
4. 관찰 가능성 및 모니터링: 마이크로서비스의 동작 및 성능에 대한 가시성 확보, 상태 모니터링 및 문제 해결은 복잡한 마이크로서비스 아키텍처에서 어려울 수 있습니다. 기존의 모니터링 접근 방식은 확장성이 좋지 않을 수 있으며 마이크로 서비스의 분산 특성에 대한 적절한 가시성을 제공하지 못할 수 있습니다.

서비스 메시는 마이크로서비스 아키텍처 관리에서 이러한 문제를 해결하도록 설계된 전용 인프라 계층입니다. 개별 마이크로서비스에서 추상화된 일련의 공통 네트워킹 및 관찰 가능성 기능을 제공하여 이러한 교차 절단 문제를 개별적으로 관리할 필요 없이 핵심 기능에 집중할 수 있습니다.

서비스 메시에는 일반적으로 각 마이크로 서비스 인스턴스와 함께 Envoy 또는 Istio와 같은 사이드카 프록시 집합을 주입하여 데이터 평면을 형성하는 작업이 포함됩니다. 이러한 프록시는 서비스 검색, 로드 밸런싱, 트래픽 라우팅, 내결함성 및 관찰 가능성과 같은 작업을 처리하는 반면 마이크로 서비스 자체는 이러한 문제에서 분리된 상태로 유지됩니다.

서비스 메시는 프록시 구성 및 관리를 위한 중앙 집중식 관리 평면인 제어 평면도 제공합니다. 컨트롤 플레인을 통해 운영자는 정책을 정의 및 시행하고, 라우팅 규칙을 구성하고, 인증 및 승인과 같은 보안 기능을 관리하고, 마이크로서비스의 동작 및 성능을 모니터링할 수 있습니다.

서비스 메시는 교차 절단 문제를 처리하기 위한 통합되고 표준화된 접근 방식을 제공하여 각 마이크로 서비스에 대해 이러한 문제를 개별적으로 관리하는 복잡성을 줄임으로써 복잡한 마이크로 서비스 아키텍처 관리의 어려움을 해결하는 것을 목표로 합니다. 관찰 가능성을 개선하고, 관리를 간소화하고, 탄력성을 강화하고, 마이크로서비스 통신을 관리하는 일관된 방법을 제공하여 규모에 맞게 마이크로서비스 기반 애플리케이션을 더 쉽게 운영하고 관리할 수 있도록 합니다.
```

## Quest
* 메모장 시스템을 JWT 발급을 위한 마이크로서비스와 실제 비즈니스 로직을 처리하는 마이크로서비스로 나누어 보세요.
* JWT 토큰 발급의 역할을 하는 마이크로서비스를 AWS Lambda와 API Gateway를 이용하여 구축해 보세요.

## Advanced
* Istio는 어떤 툴일까요? 이 툴을 Kubernetes와 함께 사용하여 어떤 구조를 구현할 수 있을까요?
