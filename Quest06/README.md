# Quest 06. 인터넷의 이해

## Introduction
* 이번 퀘스트에서는 인터넷이 어떻게 동작하며, 서버와 클라이언트, 웹 브라우저 등의 역할은 무엇인지 알아보겠습니다.

## Topics
* 서버와 클라이언트, 그리고 웹 브라우저
* 인터넷을 구성하는 여러 가지 프로토콜
  * IP
  * TCP
  * HTTP
* DNS

## Resources
* [OSI 모형](https://ko.wikipedia.org/wiki/OSI_%EB%AA%A8%ED%98%95)
* [IP](https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%EB%84%B7_%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C)
  * [Online service Traceroute](http://ping.eu/traceroute/)
* [TCP](https://ko.wikipedia.org/wiki/%EC%A0%84%EC%86%A1_%EC%A0%9C%EC%96%B4_%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C)
  * [Wireshark](https://www.wireshark.org/download.html)
* [HTTP](https://ko.wikipedia.org/wiki/HTTP)
  * Chrome developer tool, Network tab
* [DNS](https://ko.wikipedia.org/wiki/%EB%8F%84%EB%A9%94%EC%9D%B8_%EB%84%A4%EC%9E%84_%EC%8B%9C%EC%8A%A4%ED%85%9C)
  * [Web-based Dig](http://networking.ringofsaturn.com/Tools/dig.php)

## Checklist
* 인터넷은 어떻게 동작하나요? Internet Protocol Suite의 레이어 모델에 입각하여 설명해 보세요.
```
인터넷은 컴퓨터 네트워크들이 상호 연결되어 정보를 주고 받을 수 있도록 하는 글로벌한 네트워크입니다. 인터넷 프로토콜 스위트(Internet Protocol Suite)은 이러한 인터넷을 운영하기 위한 일련의 프로토콜과 규칙들의 집합입니다. 인터넷 프로토콜 스위트는 OSI 7계층 모델과 유사한 레이어 모델을 사용하며, 이는 데이터 통신을 위한 다양한 프로토콜을 계층별로 분리하여 설명하는 방식입니다.

인터넷 프로토콜 스위트의 레이어 모델은 다음과 같습니다.

물리 계층 (Physical layer) - 데이터를 전기적 신호로 변환하여 네트워크를 통해 전송하는 계층입니다.

데이터 링크 계층 (Data Link layer) - 물리적인 매체를 통해 전송된 데이터를 인식하고, 오류 검출 및 복구를 수행하는 계층입니다. 예를 들어 이더넷 프로토콜이 이 계층에서 사용됩니다.

네트워크 계층 (Network layer) - 데이터를 라우터를 통해 다른 네트워크로 전송하는 계층입니다. 이 계층에서는 IP 프로토콜이 사용됩니다.

전송 계층 (Transport layer) - 애플리케이션 계층에서 전송되는 데이터를 송수신하는 호스트 간의 연결을 제어하는 계층입니다. TCP(Transmission Control Protocol)와 UDP(User Datagram Protocol) 프로토콜이 이 계층에서 사용됩니다.

세션 계층 (Session layer) - 네트워크에서 연결된 두 컴퓨터 간의 통신을 설정하고 유지하는 계층입니다.

표현 계층 (Presentation layer) - 애플리케이션 계층에서 사용되는 데이터의 표현 방식을 정의하는 계층입니다. 예를 들어, MIME(Multipurpose Internet Mail Extensions)은 이 계층에서 사용됩니다.

애플리케이션 계층 (Application layer) - 사용자가 사용하는 애플리케이션에서 사용되는 프로토콜을 정의하는 계층입니다. 예를 들어, HTTP(Hypertext Transfer Protocol)는 웹 브라우저와 웹 서버 간의 통신을 위해 이 계층에서 사용됩니다.
```
  * 근거리에서 서로 떨어진 두 전자기기가 유선/무선으로 서로 통신하는 프로토콜은 어떻게 동작할까요?
  ```
  근거리에서 서로 떨어진 두 전자기기가 유선 또는 무선으로 서로 통신하기 위해서는 해당 프로토콜에 맞는 하드웨어와 소프트웨어가 필요합니다.
  유선 통신의 경우, 일반적으로 Ethernet이나 USB 등의 케이블을 사용하여 두 기기를 연결합니다. 연결된 두 기기는 데이터 링크 계층의 프로토콜인 Ethernet 프로토콜 등을 사용하여 데이터를 주고 받습니다.
  무선 통신의 경우, 두 기기가 무선으로 통신하기 위해서는 무선 통신을 지원하는 하드웨어와 무선 프로토콜을 사용합니다. 일반적으로 Wi-Fi, Bluetooth, NFC 등의 무선 통신 프로토콜이 사용됩니다.
  예를 들어, Wi-Fi를 사용하여 무선으로 두 기기가 통신하는 경우, 먼저 두 기기는 무선 액세스 포인트(또는 라우터)에 연결됩니다. 이 때 사용되는 프로토콜은 IEEE 802.11 프로토콜입니다. 무선 액세스 포인트를 통해 연결된 두 기기는 IP 프로토콜을 사용하여 서로 통신합니다. 이때 사용되는 프로토콜은 TCP 또는 UDP 프로토콜 등이 있습니다.
  Bluetooth를 사용하여 무선으로 두 기기가 통신하는 경우, 먼저 두 기기는 페어링을 통해 서로 연결됩니다. 이 때 사용되는 프로토콜은 Bluetooth 프로토콜입니다. Bluetooth를 통해 연결된 두 기기는 일반적으로 SPP(Serial Port Profile) 프로파일이나 A2DP(Advanced Audio Distribution Profile) 프로파일 등을 사용하여 데이터를 주고받습니다.
  NFC를 사용하여 무선으로 두 기기가 통신하는 경우, 두 기기는 근접 상태에서 서로 통신합니다. 이 때 사용되는 프로토콜은 NFC 프로토콜입니다. NFC를 통해 연결된 두 기기는 NDEF(NFC Data Exchange Format) 등의 프로토콜을 사용하여 데이터를 주고받습니다.
  이와 같이 유선 또는 무선으로 두 기기가 서로 통신하기 위해서는 해당 프로토콜에 맞는 하드웨어와 소프트웨어가 필요하며, 각각의 프로토콜마다 다양한 규칙과 규격이 있습니다.
  ```
  * 근거리에 있는 여러 대의 전자기기가 서로 통신하는 프로토콜은 어떻게 동작할까요?
  ```
  근거리에 있는 여러 대의 전자기기가 서로 통신하기 위해서는 해당 프로토콜에 맞는 하드웨어와 소프트웨어가 필요합니다.
  예를 들어, 근거리 무선 통신을 지원하는 기기들이 서로 통신하는 경우, 일반적으로 사용되는 프로토콜은 Wi-Fi, Bluetooth, Zigbee, Z-Wave 등이 있습니다. 각각의 프로토콜은 다양한 기능과 규격을 가지고 있습니다.
  Wi-Fi를 사용하는 경우, 일반적으로 무선 액세스 포인트(또는 라우터)를 중심으로 여러 대의 기기들이 연결됩니다. Wi-Fi 기기들은 무선 액세스 포인트와 연결하여 IP 주소를 할당받고, TCP 또는 UDP 프로토콜 등을 사용하여 서로 통신합니다.
  Bluetooth를 사용하는 경우, 여러 대의 기기들이 페어링하여 서로 연결됩니다. 페어링된 기기들은 Bluetooth 프로토콜을 사용하여 데이터를 주고받습니다. Bluetooth Mesh 프로토콜을 사용하는 경우, 여러 대의 기기들이 망 형태로 연결되어 데이터를 주고받을 수 있습니다.
  Zigbee를 사용하는 경우, 여러 대의 기기들이 망 형태로 연결되어 서로 통신합니다. Zigbee 기기들은 IEEE 802.15.4 무선 프로토콜을 기반으로 하며, 주로 스마트 홈 등의 IoT 분야에서 사용됩니다.
  Z-Wave를 사용하는 경우, 여러 대의 기기들이 망 형태로 연결되어 서로 통신합니다. Z-Wave 기기들은 Z-Wave 프로토콜을 사용하여 데이터를 주고받으며, 주로 스마트 홈 등의 IoT 분야에서 사용됩니다.
  이와 같이 근거리에 있는 여러 대의 전자기기가 서로 통신하기 위해서는 해당 프로토콜에 맞는 하드웨어와 소프트웨어가 필요하며, 각각의 프로토콜마다 다양한 규칙과 규격이 있습니다.
  ```
  * 아주 멀리 떨어져 있는 두 전자기기가 유선/무선으로 서로 통신하는 프로토콜은 어떻게 동작할까요?
  ```
  아주 멀리 떨어져 있는 두 전자기기가 유선/무선으로 서로 통신하기 위해서는 인터넷이나 전화망 등의 네트워크를 이용해야 합니다.
  유선 통신의 경우, 두 전자기기 사이에 광케이블, 동축케이블, 전선 등의 물리적인 케이블이 연결되어 있어야 하며, 해당 케이블에 따라 데이터를 전송합니다. 이 때, 데이터 전송에는 TCP/IP 프로토콜을 사용합니다. TCP/IP는 인터넷을 비롯한 대부분의 네트워크에서 사용되는 프로토콜로, 데이터를 패킷으로 분할하여 전송하고, 패킷의 손실이나 손상을 검출하고 복구합니다.
  무선 통신의 경우, 두 전자기기 사이에는 인터넷 기반의 네트워크가 필요합니다. 먼저, 무선 액세스 포인트(또는 라우터)를 통해 인터넷에 연결된 후, 해당 인터넷을 통해 다른 전자기기와 통신합니다. 무선 통신에서는 일반적으로 Wi-Fi, LTE, 5G 등의 프로토콜이 사용됩니다. 이 때, 데이터 전송에는 TCP/IP 프로토콜을 사용합니다.
  따라서, 아주 멀리 떨어져 있는 두 전자기기가 유선/무선으로 서로 통신하기 위해서는 인터넷이나 전화망 등의 중계망을 통해 데이터를 전송하며, 해당 네트워크에서는 TCP/IP 프로토콜을 사용하여 데이터를 전송합니다.
  ```
  * 두 전자기기가 신뢰성을 가지고 통신할 수 있도록 하기 위한 프로토콜은 어떻게 동작할까요?
  ```
  두 전자기기가 신뢰성을 가지고 통신하기 위해서는 데이터 전송 중에 발생할 수 있는 다양한 문제들에 대해 대처해야 합니다. 이를 위해 대표적인 신뢰성 프로토콜인 TCP(Transmission Control Protocol)가 사용됩니다.
  TCP는 데이터를 안정적으로 전송하기 위해 여러 가지 기능을 제공합니다. 우선, TCP는 데이터 전송 중에 데이터를 손실하거나 손상된 데이터를 감지하고, 이를 복구하기 위해 다시 전송합니다. 또한, 데이터 전송 중에 데이터가 순서대로 도착하지 않는 문제를 해결하기 위해 순서를 지정하여 전송합니다. 또한, TCP는 데이터 전송 속도를 제어하기 위해 흐름 제어 기능을 제공합니다. 이를 통해 데이터 전송 속도가 느리거나 빠를 때 발생할 수 있는 문제들을 방지할 수 있습니다.
  데이터를 안정적으로 전송하기 위해 TCP는 3-way handshake라고 불리는 과정을 거칩니다. 이 과정에서 클라이언트와 서버가 상호간에 정보를 교환하여 신뢰적인 연결을 설정합니다. 이후 데이터 전송 과정에서도 클라이언트와 서버는 계속해서 정보를 주고받으면서 신뢰적인 통신을 유지합니다.
  따라서, 두 전자기기가 신뢰성을 가지고 통신하기 위해서는 TCP 프로토콜과 같은 신뢰성 프로토콜을 사용하여 안정적인 데이터 전송을 보장해야 합니다.
  ```
  * HTTP는 어떻게 동작할까요?
  ```
  HTTP(HyperText Transfer Protocol)는 월드 와이드 웹(World Wide Web)에서 데이터를 주고받기 위한 통신 규약 중 하나입니다. HTTP는 클라이언트(Client)와 서버(Server) 간의 상호작용을 통해 데이터를 주고받습니다.
  HTTP는 기본적으로 요청(Request)과 응답(Response)으로 구성됩니다. 클라이언트가 서버에 데이터를 요청하면, 서버는 요청을 받아 해당 데이터를 찾아서 클라이언트에게 응답합니다. 이 과정에서 HTTP 프로토콜은 요청과 응답에 대한 여러 가지 규칙과 방법을 정의합니다.
  HTTP 요청은 메서드(Method), URL, 버전(Version), 헤더(Header), 본문(Body) 등으로 구성됩니다. 메서드는 요청의 종류를 나타내는데, 가장 많이 사용되는 메서드는 GET과 POST입니다. GET은 데이터를 가져오는 요청에, POST는 데이터를 서버에 보내는 요청에 사용됩니다. URL은 요청할 데이터의 주소를 나타내며, 버전은 HTTP의 버전을 나타냅니다. 헤더는 요청에 대한 부가적인 정보를 포함하며, 본문은 POST 요청과 같이 데이터를 서버에 전송해야 할 때 사용됩니다.
  HTTP 응답은 상태코드(Status Code), 헤더, 본문으로 구성됩니다. 상태코드는 요청이 성공적으로 처리되었는지, 오류가 발생했는지 등을 나타내며, 헤더는 응답에 대한 부가적인 정보를 포함합니다. 본문은 요청 결과로 받은 데이터를 포함합니다.
  HTTP는 기본적으로 TCP/IP 프로토콜 위에서 동작하며, 보안을 위해 HTTPS(HTTP Secure)를 사용할 수 있습니다. HTTPS는 SSL(Secure Socket Layer) 또는 TLS(Transport Layer Security) 프로토콜을 사용하여 데이터를 암호화하여 보안성을 높입니다.
  따라서, HTTP는 웹에서 데이터를 주고받기 위한 기본적인 통신 규약이며, 요청과 응답에 대한 규칙과 방법을 정의하여 클라이언트와 서버 간의 효율적인 상호작용을 가능하게 합니다.
  ```
* 우리가 브라우저의 주소 창에 www.knowre.com 을 쳤을 때, 어떤 과정을 통해 서버의 IP 주소를 알게 될까요?
```
브라우저의 주소 창에 www.knowre.com을 입력하면, 브라우저는 먼저 입력한 주소가 유효한 도메인 이름인지 확인합니다. 이 과정에서 브라우저는 DNS(Domain Name System) 서버에 쿼리를 보내서 도메인 이름에 대응되는 IP 주소를 얻습니다.
DNS 서버는 인터넷 상에서 도메인 이름과 IP 주소를 대응시키는 중요한 역할을 합니다. DNS 서버는 분산된 형태로 운영되며, 전 세계적으로 수많은 DNS 서버들이 서로 연결돼 있습니다. 브라우저는 이 중에서 자신과 가장 가까운 DNS 서버를 선택하여 쿼리를 보내고, 해당 DNS 서버는 쿼리에 대해 자신의 캐시(cache)에서 도메인 이름에 대응되는 IP 주소를 찾습니다. 만약 캐시에 정보가 없다면, DNS 서버는 계층 구조로 구성된 다른 DNS 서버들에게 쿼리를 전달하여 IP 주소를 찾으려고 시도합니다.
결국, DNS 서버는 www.knowre.com에 대응되는 IP 주소를 찾아 브라우저에게 응답해줍니다. 브라우저는 이제 IP 주소를 통해 해당 서버에 접속하고, HTTP 요청을 보내서 해당 서버로부터 웹 페이지를 받아옵니다.
```

## Quest
* tracert(Windows가 아닌 경우 traceroute) 명령을 통해 www.google.com 까지 가는 경로를 찾아 보세요.

1. 컴퓨터에서 명령 프롬프트를 엽니다. Windows에서는 검색 표시줄에 "cmd"를 입력하고 명령 프롬프트 앱을 선택하여 이 작업을 수행할 수 있습니다.
2. 명령 프롬프트에 "tracert www.google.com"을 입력하고 Enter 키를 누릅니다.
3. 명령이 완료될 때까지 기다리십시오. 네트워크 속도에 따라 몇 초에서 몇 분 정도 걸릴 수 있습니다.
4. tracert 명령은 컴퓨터의 인터넷 트래픽이 Google 서버로 가는 도중에 통과하는 모든 라우터(홉이라고도 함) 목록을 표시합니다. 각 홉은 트래픽이
라우팅되는 다른 네트워크 장치를 나타냅니다.
5. tracert 명령은 각 홉이 응답하는 데 걸리는 시간도 표시합니다. RTT(Round-Trip Time)라고 하는 이 시간은 컴퓨터가 데이터 패킷을 홉으로 보내고 응답을 받는 데 걸리는 시간을 나타냅니다.
6. tracert 명령의 마지막 홉은 트래픽이 목적지에 성공적으로 도달했음을 의미하는 Google 서버여야 합니다.

tracert 명령을 실행하면 인터넷 트래픽이 특정 웹 사이트에 도달하는 데 걸리는 경로를 알 수 있습니다.

  * 어떤 IP주소들이 있나요?
    1     3 ms     3 ms     4 ms  172.40.0.1
  2     1 ms     4 ms     4 ms  192.168.10.1
  3     2 ms     3 ms     4 ms  114.71.195.1
  4   136 ms   207 ms   205 ms  175.194.7.181
  5     *        *        *     요청 시간이 만료되었습니다.
  6     6 ms     6 ms     5 ms  112.188.77.117
  7     *        *        *     요청 시간이 만료되었습니다.
  8    11 ms    24 ms     9 ms  112.174.90.150
  9    11 ms    12 ms    10 ms  112.174.84.54
 10   141 ms   139 ms   138 ms  142.250.165.78
 11   248 ms   148 ms   154 ms  108.170.243.97
 12   142 ms   143 ms   143 ms  142.250.239.221
 13   144 ms   145 ms   143 ms  kix07s06-in-f4.1e100.net [142.250.76.132]
 
  * 그 IP주소들은 어디에 위치해 있나요?
* Wireshark를 통해 www.google.com 으로 요청을 날렸을 떄 어떤 TCP 패킷이 오가는지 확인해 보세요
  * TCP 패킷을 주고받는 과정은 어떻게 되나요?
  * 각각의 패킷에 어떤 정보들이 담겨 있나요?
* telnet 명령을 통해 http://www.google.com/ URL에 HTTP 요청을 날려 보세요.
  * 어떤 헤더들이 있나요?
  * 그 헤더들은 어떤 역할을 하나요?

## Advanced
* HTTP의 최신 버전인 HTTP/3는 어떤 식으로 구성되어 있을까요?
* TCP/IP 외에 전세계적인 네트워크를 구성하기 위한 다른 방식도 제안된 바 있을까요?
