# Quest 10. 인증의 이해

## Introduction

- 이번 퀘스트에서는 웹에서의 인증에 관해 알아보겠습니다.

## Topics

- Cookie
- Session
- JWT

## Resources

- [MDN - HTTP 쿠키](https://developer.mozilla.org/ko/docs/Web/HTTP/Cookies)
- [Cookies and Sessions](https://web.stanford.edu/~ouster/cgi-bin/cs142-fall10/lecture.php?topic=cookie)
- [JWT](https://jwt.io/)

## Checklist

- 쿠키란 무엇일까요?

  ```
  > HTTP 쿠키는 서버가 사용자의 웹 브라우저에 전송하는 작은 데이터 조각이다.
  > 브라우저는 그 데이터 조각들을 저장해 놓았다가, 동일한 서버에 재 요청 시 저장된 데이터를 함께 전송한다.
  > 쿠키는 두 요청이 동일한 브라우저에서 들어왔는지 아닌지를 판단할 때 주로 사용한다.
  > 이를 이용하여 사용자의 로그인 상태 유지 할 수있음.
  ```

  - 쿠키는 어떤 식으로 동작하나요?
  - 쿠키는 어떤 식으로 서버와 클라이언트 사이에 정보를 주고받나요?

  ```
   >  쿠키는 서버가 클라이언트의 웹브라우제어 소량의 정보를 저장하고 나중에 클라이언트가 서버에 다시 액세스할 때 해당 정보를 검색하는 방법이다. 이를 통해 서버는 클라이어트에 대한 특정 기본 설정 또는 설정을 기억하고 여러 요청에서 상태를 유지 가능.

   > 클라이언트가 서버에 요청하면 서버는 응답에 하나 이상의 쿠키를 포함할 수 있습니다. 쿠키는 쿠키와 해당 값을 설정하는 데 사용되는 Set-Cookie 헤더와 함께 HTTP 헤더로 전송됩니다.

   //예시코드
   Set-Cookie: sessionId=1234567890; expires=Sun, 12 Nov 2023 00:00:00 GMT; path=/

   > 그러면 값이 1234567890인 sessionId라는 쿠키가 설정됩니다. 'expires' 속성은 쿠키의 만료 날짜와 시간을 지정하고 'path' 속성은 쿠키가 유효한 서버의 경로를 지정합니다.
   > 클라이언트가 서버에 다른 요청을 보낼 때 요청의 도메인 및 경로와 일치하는 모든 쿠키를 포함합니다. 쿠키는 요청에 하나 이상의 쿠키를 포함하는 데 사용되는 'Cookie' 헤더와 함께 HTTP 헤더로 전송됩니다.
  ```

- 웹 어플리케이션의 세션이란 무엇일까요?

  ```
  > 세션이란 여러 HTTP 요청에서 애플리케이션과 사용자의 상호 작용과 관련된 데이터를 지속적으로 저장하는 방법이다.
  > 일반적인 웹 에플리케이션에서 사용자가 수행한 각 HTTP 요청은 동일한 사용자가 수행한 이전 요청에 대한 내재 지식 없이 서버에서 독립적인 트랜잭션으로 처리된다.

  ```

  - 세션의 ID와 내용은 각각 어디에 저장되고 어떻게 서버와 교환되나요?

  ```

  > 여러 요청에서 상태를 유지하기 위해 웹 애플리케이션은 일반적으로 고유 식별자(세션 ID라고 함)를 각 사용자의 상호 작용과 연결하는 세션 메커니즘을 사용. 세션 ID는 일반적으로 사용자 컴퓨터에 쿠키로 저장되며 서버에 대한 후속 HTTP 요청에 포함됩니다.
  > 서버가 세션 ID가 있는 요청을 수신하면 해당 세션과 연결된 저장된 데이터를 조회하고 이를 사용하여 응답을 사용자 정의합니다. 예를 들어 사용자가 애플리케이션에 로그인한 경우 서버는 사용자의 ID 또는 액세스 수준을 세션 데이터에 저장하고 이 정보를 사용하여 사용자가 액세스할 수 있는 기능을 제어할 수 있습니다.
  > 세션은 서버 측(예: 메모리, 데이터베이스 또는 캐시) 또는 클라이언트 측(예: 서명 및 암호화된 쿠키 사용)에 세션 데이터를 저장하는 것을 포함하여 다양한 기술을 사용하여 구현될 수 있습니다. 세션 관리에는 특정 시간이 지나면 세션이 자동으로 무효화되는 세션 만료 또는 비활성 기간 후 세션이 무효화되는 세션 시간 초과와 같은 기능도 포함될 수 있습니다.
  ```

- JWT란 무엇인가요?

```
> JWT는 JSON 웹 토큰(JSON Web Token)의 약자로 당사자간에 데이터를 JSON 객체로 전송하는 작고 독립적인 방법.
> JWT 는 일반적으로 웹 에플리케이션의 인증 및 권한 부여에 사용되며 종종 기존 세션 기반 인증 메커니즘을 대체하는 데 사용.
```

- JWT 토큰은 어디에 저장되고 어떻게 서버와 교환되나요?

```
>  JWT 토큰은 애플리케이션의 요구 사항에 따라 다양한 방법으로 저장 가능.
> 가장 일반적인 저장 메커니즘은 쿠키 및 로컬저장소지만 세션 저장소 및 HTTP 헤더와 같은 다른 옵션도 가능.
> 사용자가 웹 에플리케이션에 로그인 하면 서버는 사용자에 대한 정보가 포함된 JWT 토큰을 생성하고 비밀키로 서명.
> 그런 다음 JWT 토큰은 클라이언트에 문자열로 반환되며 쿠키 또는 로컬 저장소에 저장.
```

- 세션에 비해 JWT가 가지는 장점은 무엇인가요? 또 JWT에 비해 세션이 가지는 장점은 무엇인가요?

```
> 세션에 비해 JWT의 장점은
 > 상태 비저장: JWT는 독립적이며 서버 측 스토리지 또는 상태가 필요하지 않습니다. 즉, JWT는 분산 환경에서 사용할 수 있고 확장성이 뛰어납니다.
 > 분산형: JWT는 공유 세션 상태 없이도 다양한 도메인 또는 서비스에서 사용자를 인증하고 권한을 부여하는 데 사용할 수 있습니다.
 > 모바일 친화적: JWT는 로컬 스토리지 또는 기타 클라이언트 측 스토리지 메커니즘을 사용하여 모바일 장치에 쉽게 저장할 수 있습니다.
 > 서버 로드 감소: JWT는 서버 측 스토리지 또는 상태가 필요하지 않기 때문에 서버의 로드를 줄이고 애플리케이션 성능을 향상시킬 수 있습니다.

 JWT에 비해 세션의 장점:
   > 더 안전함: 세션 데이터가 서버 측에 저장되고 암호화되어 공격으로부터 보호될 수 있으므로 세션은 경우에 따라 JWT보다 더 나은 보안을 제공할 수 있습니다.
   > 더 많은 제어: 세션은 개발자에게 사용자의 세션 상태에 대한 더 많은 제어를 제공하며 복잡한 워크플로 및 사용자 지정 동작을 구현하는 데 사용할 수 있습니다.
   > 간단한 구현: 세션은 암호화 알고리즘 및 서명 확인에 대한 지식이 필요하지 않기 때문에 일반적으로 JWT보다 구현이 간단합니다.

```

## Quest

- 이번에는 메모장 시스템에 로그인 기능을 넣고자 합니다.
  - 사용자는 딱 세 명만 존재한다고 가정하고, 아이디와 비밀번호, 사용자의 닉네임은 하드코딩해도 무방합니다.
  - 로그인했을 때 해당 사용자가 이전에 작업했던 탭들과 마지막으로 활성화된 탭 등의 상태가 로딩 되어야 합니다.
  - 세션을 이용한 버전과, JWT를 이용한 버전 두 가지를 만들어 보세요!
    - 세션을 이용할 경우 세션은 서버의 메모리나 파일에 저장하면 됩니다.

## Advanced

- Web Authentication API(WebAuthn)은 무엇인가요?
