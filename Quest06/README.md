# Quest 06. 인터넷의 이해

## Introduction

- 이번 퀘스트에서는 인터넷이 어떻게 동작하며, 서버와 클라이언트, 웹 브라우저 등의 역할은 무엇인지 알아보겠습니다.

## Topics

- 서버와 클라이언트, 그리고 웹 브라우저
- 인터넷을 구성하는 여러 가지 프로토콜
  - IP
  - TCP
  - HTTP
- DNS

## Resources

- [OSI 모형](https://ko.wikipedia.org/wiki/OSI_%EB%AA%A8%ED%98%95)
- [IP](https://ko.wikipedia.org/wiki/%EC%9D%B8%ED%84%B0%EB%84%B7_%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C)
  - [Online service Traceroute](http://ping.eu/traceroute/)
- [TCP](https://ko.wikipedia.org/wiki/%EC%A0%84%EC%86%A1_%EC%A0%9C%EC%96%B4_%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C)
  - [Wireshark](https://www.wireshark.org/download.html)
- [HTTP](https://ko.wikipedia.org/wiki/HTTP)
  - Chrome developer tool, Network tab
- [DNS](https://ko.wikipedia.org/wiki/%EB%8F%84%EB%A9%94%EC%9D%B8_%EB%84%A4%EC%9E%84_%EC%8B%9C%EC%8A%A4%ED%85%9C)
  - [Web-based Dig](http://networking.ringofsaturn.com/Tools/dig.php)

## Checklist

- 인터넷은 어떻게 동작하나요? Internet Protocol Suite의 레이어 모델에 입각하여 설명해 보세요.

  ```
  지역 PC 가 인터넷에 접근할때 인터넷 영역에서의 수많은 라우팅을 관리하는 Hob(Default Gateway)이 필요하고, 최종적으로 인터넷 사이트에 해당하는 라우터에 접근.

  > 보통 상대의 목적지 IP주소는 특정 값으로 정해지지만, 인터넷의 경우엔 0.0.0.0/0으로 특정지어지지 않음.
  > 라우팅 경로 정보가 정해져 있는 정적라우팅과는 달리, 네트워크 상황에 따라 정보를 빠르게 확보할 수 있는 경로를 중심으로 패킷을 전송하는 라우팅이다.
  > 데이터 정보에 포함된 목적지 주소가 인터넷처럼 광범위하거나, 정적라우팅을 통한 탐색이 불가능할 경우 동적 라우팅을 통해 데이터 전달을 진행.

  - 근거리에서 서로 떨어진 두 전자기기가 유선/무선으로 서로 통신하는 프로토콜은 어떻게 동작할까요?
    답:

    > 근거리에 놓여진 두 기기의 네트워크 대역은 보통 정적 라우팅을 통해 연결하며, 라우팅테이블에 저장된 두 기기의 IP와 PORT 정보를 통해 데이터 전달이 이루어진다.
    > 와이파이를 통해 연결하면 무선 공유기를 통한 라우팅을 진행할 것이고, 블루투스를 통해 연결하면 BLE stack 프로토콜을 기반으로 통신을 진행함.
  ```

  - 근거리에 있는 여러 대의 전자기기가 서로 통신하는 프로토콜은 어떻게 동작할까요?

  ```
  > 일반적으로 이더넷프로토콜을 사용한다. > 이더넷은 근거리 통신망에서 가장 널리 사용되는 통신 프로토콜 중 하나이다.
  > 이더넷은 케이블 통해 연결된 여러 대의 컴퓨터나 기기들이 데이터를 주고 받도록 함.
  > 이더넷은 물리적으로 스타형태의 토폴로지를 가지며, 이는 모든 기기가 중앙의 네트워크 허브나 스위치에 연결되어 있다.
  > 따라서 데이터 보낼 때 해당 기기의 MAC 주소를 확인하고 해당 MAC 주소를 가지고 있는 기기에 데이터를 전송하는 방식으로 동작.

  ```

  - 아주 멀리 떨어져 있는 두 전자기기가 유선/무선으로 서로 통신하는 프로토콜은 어떻게 동작할까요?

  ```
    > 사용하는 프로토콜은 두 기기간 거리보다는 두 기기가 네트워크를 어떤 형태를 통해 연결하였으며 어떤 통신규약을 채용하고 있는지에 영향을 받음.
    > 보통 멀리 떨어져 있는 기기의 경우엔 근거리 대역의 네트워크가 없어 라우팅 테이블 작성이 어려워서, 인터넷과 같이 Hob(지역 통신사)를 통한 데이터 전달이 이루어짐.
  ```

  - 두 전자기기가 신뢰성을 가지고 통신할 수 있도록 하기 위한 프로토콜은 어떻게 동작할까요?

  ```
    > 웹과 사용자간의 대표적인 통신규약인 HTTP는 SSL인증을 적용한 HTTPS 프로토콜을 사용한 것이 가장 대표적은 보안 적용예이다.
    > HTTP프로토콜을 통한 데이터통신 과정에 SSL/TLS 암호화 방식(양방향 암호화)를 적용하여 상대적으로 안전한 전달이 가능하도록 한 방식.
  ```

  - HTTP는 어떻게 동작할까요?

  ```
    > HTTP는 웹에서 데이터를 주고받기 위한 프로토콜로, 클라이언트와 서버 간에 요청과 응답을 주고받으면서 동작
    > HTTP는 기본적으로 텍스트 기반의 프로토콜이므로, 데이터 전송 시에는 인코딩 및 디코딩 과정이 필요
  ```

- 우리가 브라우저의 주소 창에 www.knowre.com 을 쳤을 때, 어떤 과정을 통해 서버의 IP 주소를 알게 될까요?
  ```
  > DNS 조회 시작: 먼저, 브라우저는 DNS(Domain Name System) 서버에게 www.knowre.com의 IP 주소를 물어본다.
  > 로컬 DNS 조회: 로컬 DNS 캐시에서 해당 도메인의 IP 주소가 캐싱되어 있으면, 브라우저는 바로 해당 IP 주소로 연결을 시도
  > Root DNS 조회: 로컬 DNS 캐시에 해당 도메인의 IP 주소가 없으면, 브라우저는 최상위 DNS 서버인 Root DNS 서버에게 해당 도메인의 IP 주소를 물어본다.
  > TLD DNS 조회: Root DNS 서버는 해당 도메인의 Top Level Domain(TLD) DNS 서버의 IP 주소를 브라우저에게 알려줌.
  > Authoritative DNS 조회: 브라우저는 TLD DNS 서버에 해당 도메인의 Authoritative DNS 서버의 IP 주소를 물어본다.
  > IP 주소 반환: Authoritative DNS 서버는 해당 도메인의 IP 주소를 브라우저에게 반환함. 이제 브라우저는 해당 IP 주소로 서버와 연결을 시도
  > 위와 같은 과정을 통해, 브라우저는 www.knowre.com 도메인의 IP 주소를 찾아내고 해당 서버와 연결을 시도
  ```

## Quest

- tracert(Windows가 아닌 경우 traceroute) 명령을 통해 www.google.com 까지 가는 경로를 찾아 보세요.

  - 어떤 IP주소들이 있나요?
    > 172.40.0.1 / 192.168.10.1 / 114.71.195.1 등 총
    > 17가지 정도 나옴.

- 그 IP주소들은 어디에 위치해 있나요?

  > kix07s07-in-f4.1e100.net ?

- Wireshark를 통해 www.google.com 으로 요청을 날렸을 떄 어떤 TCP 패킷이 오가는지 확인해 보세요
  - TCP 패킷을 주고받는 과정은 어떻게 되나요?
    1. 연결설정 : 클라이언트는 서버에 접속을 요청하는 SYN
       패킷을 보내고, 서버는 클라이언트로부터 받은 SYN 패킷에
       대한 ACK와 SYN 패킷을 보내 연결 요청 수락.
    2. 데이터 전송 : 연결 설정되면, 클라이언트와 서버는
       데이터 전송.
    3. 연결 종료: 데이터 전송 완료시, 클라이언트 또는 서버
       중 하나가 연결 종료를 요청.
  - 각각의 패킷에 어떤 정보들이 담겨 있나요?
  ```
  1.송신지 포트 번호 (Source port number) : 데이터를 보내는 측의 포트 번호입니다.
  2.수신지 포트 번호 (Destination port number) : 데이터를 받는 측의 포트 번호입니다.
  3.시퀀스 번호 (Sequence number) : 세그먼트의 첫 번째 바이트의 순서 번호입니다. 이 값을 통해 수신 측에서 데이터의 순서를 파악할 수 있습니다.
  4.확인 응답 번호 (Acknowledgment number) : 수신 측에서 예상하는 다음 시퀀스 번호입니다. 이 값을 통해 송신 측에서 수신 측으로부터 받은 세그먼트를 확인할 수 있습니다.
  5.데이터 오프셋 (Data offset) : 세그먼트의 시작 위치로부터 데이터가 시작되는 위치까지의 바이트 수를 나타냅니다.
  6.제어 비트 (Control bits) : 세그먼트의 제어 정보를 포함하는 비트 필드입니다. 예를 들어, SYN 비트는 연결 설정 요청을 나타내며, ACK 비트는 수신한 데이터의 확인을 나타냅니다.
  7.윈도우 크기 (Window size) : 수신 측이 현재 처리할 수 있는 데이터의 양을 나타냅니다.
  8.체크섬 (Checksum) : 세그먼트의 오류 검출을 위한 체크섬 값입니다.
  9.중요 데이터 표시 (Urgent pointer) : 세그먼트의 긴급 데이터의 위치를 나타냅니다.
  10.옵션 (Options) : 세그먼트의 기타 옵션 정보를 포함합니다.
  ```
- telnet 명령을 통해 http://www.google.com/ URL에 HTTP 요청을 날려 보세요.
  - 어떤 헤더들이 있나요?
  - 그 헤더들은 어떤 역할을 하나요?

## Advanced

- HTTP의 최신 버전인 HTTP/3는 어떤 식으로 구성되어 있을까요?
- TCP/IP 외에 전세계적인 네트워크를 구성하기 위한 다른 방식도 제안된 바 있을까요?
